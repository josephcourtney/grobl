- [ ] Implement true repo-root–down `.grobl.toml` accumulation
  - [ ] Discover all `.grobl.toml` files from repo root → scan root
  - [ ] Apply configs in root-to-leaf order (additive, last-wins)
  - [ ] Preserve legacy `.grobl.config.toml` handling only where required by spec
- [ ] Make ignore lists additive instead of overwrite-based
  - [ ] Preserve bundled defaults
  - [ ] Append config-derived rules
  - [ ] Append CLI-derived rules last
- [ ] Ensure `!` negations override earlier excludes across all layers
- [ ] Interpret ignore patterns relative to each config file’s directory
  - [ ] Normalize patterns to repo-root-relative paths before matching
- [ ] Replace current flags with spec-compliant controls
  - [ ] Implement `--no-ignore-defaults`
  - [ ] Implement `--no-ignore-config`
  - [ ] Remove or redefine `--no-ignore` to match spec semantics
- [ ] Add regression tests covering all ignore-flag combinations
- [ ] Fix directory traversal to allow re-inclusion under excluded parents
  - [ ] Avoid pruning directories too early when later `!` rules may apply
  - [ ] Ensure traversal still descends when a directory might be re-included
- [ ] Add targeted tests for negation beneath excluded directories
  - [ ] e.g. `foo/**` excluded, `!foo/bar/baz.txt` re-included
- [ ] Enforce repo-root-relative ordering everywhere
  - [ ] Normalize paths to POSIX (`/`) separators
  - [ ] Sort using full relative paths, not just `name`
  - [ ] Apply `casefold()` during comparisons
- [ ] Ensure consistent ordering across:
  - [ ] traversal
  - [ ] tree output
  - [ ] payloads (LLM / Markdown / JSON / NDJSON)
- [ ] Add regression tests for:
  - [ ] case-insensitive ordering
  - [ ] deeply nested paths
  - [ ] repo-root anchoring
- [ ] Append a trailing newline to:
  - [ ] JSON payload output
  - [ ] JSON summary output
- [ ] Add regression tests asserting newline presence
- [ ] Ensure NDJSON records:
  - [ ] are emitted one object per line
  - [ ] have stable key ordering
  - [ ] always end with a newline
- [ ] Add shape and determinism tests for NDJSON payloads
- [ ] Ensure repo-root resolution is applied consistently to:
  - [ ] config discovery
  - [ ] ignore interpretation
  - [ ] ordering
- [ ] Audit remaining code paths that still rely on “common ancestor”
  - [ ] Replace with repo-root-relative logic where required by spec
- [ ] Add missing regression coverage for:
  - [ ] ignore hierarchy accumulation
  - [ ] negation precedence across layers
  - [ ] deterministic ordering rules
- [ ] Update `SPEC_COMPLIANCE.md` once the above items are complete
  - [ ] Move sections from “Divergent” → “Compliant”
  - [ ] Remove outdated notes about CLI, summary routing, version flags, and help output
- [ ] Bump version in `pyproject.toml` once remaining spec gaps are closed
- [ ] Add a consolidated “SPEC compliance” entry to `CHANGELOG.md`
- [ ] Run full lint / format / typecheck / test / coverage suite
  - [ ] Warn if coverage regresses

